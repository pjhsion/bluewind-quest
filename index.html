<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="í‘¸ë¥¸ë°”ëŒ í€˜ìŠ¤íŠ¸">
    <title>í‘¸ë¥¸ë°”ëŒ í€˜ìŠ¤íŠ¸ - ëª¨ë°”ì¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
        }
        
        .mobile-header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px 10px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .mobile-header h1 {
            font-size: 1.4em;
            margin-bottom: 5px;
        }
        
        .mobile-header .subtitle {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .share-bar {
            background: rgba(255,255,255,0.95);
            padding: 8px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .share-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .room-display {
            font-size: 0.8em;
            color: #333;
            font-weight: bold;
            flex: 1;
            text-align: center;
        }
        
        .container {
            max-width: 100%;
            margin: 0;
            background: white;
            min-height: calc(100vh - 60px);
        }
        
        .section {
            padding: 15px 10px;
            margin: 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .section:last-child {
            border-bottom: none;
        }
        
        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .player-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .info-item {
            margin-bottom: 10px;
        }
        
        .info-item label {
            display: block;
            font-size: 0.9em;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .input-field {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            color: #333;
            transition: border-color 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .shared-input {
            border-color: #4facfe;
            background: rgba(79, 172, 254, 0.05);
        }
        
        .mission-box {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .objectives {
            list-style: none;
            margin-top: 10px;
        }
        
        .objectives li {
            background: rgba(255,255,255,0.8);
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .objectives li:active {
            transform: scale(0.98);
        }
        
        .game-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .mini-game {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #e9ecef;
        }
        
        .mini-game h4 {
            color: #e17055;
            margin-bottom: 10px;
            font-size: 1em;
        }
        
        .game-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        
        .game-card {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            text-align: center;
        }
        
        .game-card strong {
            display: block;
            margin-bottom: 8px;
            color: #495057;
        }
        
        .stat-container {
            margin: 15px 0;
        }
        
        .stat-item {
            margin: 15px 0;
        }
        
        .stat-label {
            font-weight: 500;
            margin-bottom: 8px;
            display: block;
        }
        
        .stat-bar {
            background: #e9ecef;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .stat-fill {
            background: linear-gradient(90deg, #6c5ce7, #a29bfe);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .slider {
            width: 100%;
            height: 30px;
            -webkit-appearance: none;
            appearance: none;
            background: #e9ecef;
            border-radius: 15px;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            background: #667eea;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            background: #667eea;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        .patch-card {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            color: white;
        }
        
        .patch-card.patch-2 {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        
        .patch-card.patch-3 {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        }
        
        .patch-title {
            font-size: 1.3em;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .verse-box {
            background: rgba(255,255,255,0.2);
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #fff;
        }
        
        .inline-input {
            background: rgba(255,255,255,0.9);
            border: 1px solid rgba(255,255,255,0.5);
            border-radius: 4px;
            padding: 2px 6px;
            margin: 0 2px;
            color: #333;
            font-size: 0.9em;
        }
        
        .armor-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        
        .armor-piece {
            background: rgba(255,255,255,0.2);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .time-system {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
        }
        
        .time-slot {
            background: rgba(255,255,255,0.8);
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            color: #333;
        }
        
        .time-slot h4 {
            color: #e84393;
            margin-bottom: 8px;
            font-size: 1em;
        }
        
        .checklist {
            list-style: none;
            margin: 8px 0;
        }
        
        .checklist li {
            margin: 6px 0;
            padding: 8px;
            background: rgba(255,255,255,0.5);
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        .boss-battle {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            color: white;
            text-align: center;
        }
        
        .boss-hp {
            background: rgba(255,255,255,0.2);
            height: 25px;
            border-radius: 12px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .boss-hp-fill {
            background: linear-gradient(90deg, #ff6b6b, #ee5a24);
            height: 100%;
            width: 100%;
            border-radius: 12px;
            animation: damage 2s infinite;
        }
        
        @keyframes damage {
            0%, 100% { width: 100%; }
            50% { width: 85%; }
        }
        
        .weapon-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }
        
        .weapon {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .weapon:active {
            transform: scale(0.95);
        }
        
        .challenge-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .challenge-day {
            background: white;
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            border-left: 4px solid #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .xp-counter {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
        }
        
        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }
        
        .achievement-item {
            background: rgba(255,255,255,0.1);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .reflection-section {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .reflection-item {
            margin: 12px 0;
        }
        
        .reflection-label {
            font-weight: bold;
            margin-bottom: 8px;
            display: block;
        }
        
        .textarea-field {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            color: #333;
            resize: vertical;
            min-height: 80px;
        }
        
        .textarea-field:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .final-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 15px;
            text-align: center;
            border-radius: 12px;
            margin: 15px 0;
        }
        
        .final-message h2 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        .btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .radio-group {
            display: flex;
            gap: 15px;
            margin: 8px 0;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        .progress-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 100;
        }
        
        .section-divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, #667eea, transparent);
            margin: 20px 0;
        }
        
        /* í„°ì¹˜ í”¼ë“œë°± ê°œì„  */
        .touch-feedback {
            position: relative;
            overflow: hidden;
        }
        
        .touch-feedback::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .touch-feedback:active::before {
            width: 100px;
            height: 100px;
        }
        
        /* ìŠ¤í¬ë¡¤ ìµœì í™” */
        .container {
            -webkit-overflow-scrolling: touch;
        }
        
        /* ì…ë ¥ í•„ë“œ í™•ëŒ€ ë°©ì§€ */
        .input-field, .textarea-field {
            font-size: 16px;
        }
        
        /* ì•ˆì „ ì˜ì—­ ëŒ€ì‘ */
        .mobile-header {
            padding-top: calc(env(safe-area-inset-top) + 15px);
        }
        
        .container {
            padding-bottom: calc(env(safe-area-inset-bottom) + 20px);
        }
        
        /* ë‹¤í¬ëª¨ë“œ ì§€ì› */
        @media (prefers-color-scheme: dark) {
            .input-field, .textarea-field {
                background: #2d3748;
                color: white;
                border-color: #4a5568;
            }
            
            .game-card {
                background: #2d3748;
                color: white;
            }
        }
    </style>
</head>
<body>
    <div class="mobile-header">
        <h1>ğŸ® í‘¸ë¥¸ë°”ëŒ í€˜ìŠ¤íŠ¸</h1>
        <p class="subtitle">ğŸ“– QUEST 1: íŒ¨ì¹˜ ì‹œìŠ¤í…œ</p>
    </div>

    <div class="share-bar">
        <button class="share-btn touch-feedback" onclick="createRoom()">ğŸ“ ë°© ë§Œë“¤ê¸°</button>
        <button class="share-btn touch-feedback" onclick="joinRoom()">ğŸ”— ì°¸ì—¬í•˜ê¸°</button>
        <div class="room-display" id="roomDisplay">ê°œì¸ ëª¨ë“œ</div>
    </div>

    <div class="container">
        <!-- í”Œë ˆì´ì–´ ì •ë³´ -->
        <div class="section">
            <div class="player-info">
                <h3 class="section-title">âš”ï¸ í”Œë ˆì´ì–´ ì •ë³´</h3>
                <div class="info-item">
                    <label>ì´ë¦„:</label>
                    <input type="text" class="input-field" id="playerName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <div class="info-item">
                    <label>ì†Œì†:</label>
                    <input type="text" class="input-field" id="guildName" placeholder="êµíšŒ/ëª¨ì„ ì´ë¦„">
                </div>
                <div class="info-item">
                    <label>ì‹œì‘ì¼:</label>
                    <input type="date" class="input-field" id="startDate">
                </div>
            </div>
        </div>

        <!-- ë¯¸ì…˜ ëª©í‘œ -->
        <div class="section">
            <div class="mission-box">
                <h3 class="section-title">ğŸ¯ ë¯¸ì…˜ ëª©í‘œ</h3>
                <ul class="objectives">
                    <li class="touch-feedback">â˜ íŒ¨ì¹˜ ì‹œìŠ¤í…œ ì´í•´í•˜ê¸°</li>
                    <li class="touch-feedback">â˜ 3ê°€ì§€ í•„ìˆ˜ íŒ¨ì¹˜ ìŠµë“í•˜ê¸°</li>
                    <li class="touch-feedback">â˜ ê°œì¸ ë§ì¶¤í˜• ì „ëµ ìˆ˜ë¦½í•˜ê¸°</li>
                    <li class="touch-feedback">â˜ ì²« ë²ˆì§¸ íŒ¨ì¹˜ í™œì„±í™”í•˜ê¸°</li>
                </ul>
            </div>
        </div>

        <!-- ì•„ì´ìŠ¤ë¸Œë ˆì´í¬ -->
        <div class="section">
            <div class="game-section">
                <h3 class="section-title">ğŸ® ì•„ì´ìŠ¤ë¸Œë ˆì´í¬</h3>
                
                <div class="mini-game">
                    <h4>ğŸ² íŒ¨ì¹˜ ë§¤ì¹­ ê²Œì„</h4>
                    <p>ìƒí™©ì— ë§ëŠ” íŒ¨ì¹˜ë¥¼ ì„ íƒí•˜ì„¸ìš”!</p>
                    
                    <div class="game-grid">
                        <div class="game-card">
                            <strong>ìƒí™© A</strong>
                            <p>ì‹œí—˜ ìŠ¤íŠ¸ë ˆìŠ¤ë¡œ ë¨¸ë¦¬ê°€ ë³µì¡í•´ìš”</p>
                            <input type="text" class="input-field" id="matchA" placeholder="ë‹µ: â‘ â‘¡â‘¢â‘£">
                        </div>
                        <div class="game-card">
                            <strong>ìƒí™© B</strong>
                            <p>ì¹œêµ¬ë“¤ê³¼ ì‹¸ì›Œì„œ ë§ˆìŒì´ ì•„íŒŒìš”</p>
                            <input type="text" class="input-field" id="matchB" placeholder="ë‹µ: â‘ â‘¡â‘¢â‘£">
                        </div>
                        <div class="game-card">
                            <strong>ìƒí™© C</strong>
                            <p>ë¯¸ë˜ê°€ ë¶ˆì•ˆí•˜ê³  ê±±ì •ë¼ìš”</p>
                            <input type="text" class="input-field" id="matchC" placeholder="ë‹µ: â‘ â‘¡â‘¢â‘£">
                        </div>
                        <div class="game-card">
                            <strong>ìƒí™© D</strong>
                            <p>í•˜ë£¨ ì¢…ì¼ ë¬´ê¸°ë ¥í•˜ê³  ì˜ìš•ì´ ì—†ì–´ìš”</p>
                            <input type="text" class="input-field" id="matchD" placeholder="ë‹µ: â‘ â‘¡â‘¢â‘£">
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.8); padding: 10px; border-radius: 8px; margin-top: 10px;">
                        <strong>ğŸ’Š íŒ¨ì¹˜ ì˜µì…˜:</strong><br>
                        â‘  ê¸°ë„ íŒ¨ì¹˜ â‘¡ ì„±ê²½ íŒ¨ì¹˜<br>
                        â‘¢ ì˜ˆë°° íŒ¨ì¹˜ â‘£ ì˜¬ì¸ì› íŒ¨ì¹˜
                    </div>
                </div>

                <div class="mini-game">
                    <h4>ğŸ² í˜„ì¬ ìŠ¤íƒ¯ ì²´í¬</h4>
                    <div class="stat-container">
                        <div class="stat-item">
                            <label class="stat-label">âš”ï¸ ì˜ˆë°° ì°¸ì—¬ë„</label>
                            <div class="stat-bar">
                                <div class="stat-fill" id="worship-fill" style="width: 30%"></div>
                            </div>
                            <input type="range" class="slider" min="0" max="10" value="3" id="worship-stat">
                        </div>
                        
                        <div class="stat-item">
                            <label class="stat-label">ğŸ“– ì„±ê²½ ì½ê¸°</label>
                            <div class="stat-bar">
                                <div class="stat-fill" id="bible-fill" style="width: 20%"></div>
                            </div>
                            <input type="range" class="slider" min="0" max="10" value="2" id="bible-stat">
                        </div>
                        
                        <div class="stat-item">
                            <label class="stat-label">ğŸ™ ê¸°ë„ ìƒí™œ</label>
                            <div class="stat-bar">
                                <div class="stat-fill" id="prayer-fill" style="width: 40%"></div>
                            </div>
                            <input type="range" class="slider" min="0" max="10" value="4" id="prayer-stat">
                        </div>
                        
                        <div class="stat-item">
                            <label class="stat-label">ğŸ’ª ì‹ ì•™ ì—´ì •</label>
                            <div class="stat-bar">
                                <div class="stat-fill" id="passion-fill" style="width: 50%"></div>
                            </div>
                            <input type="range" class="slider" min="0" max="10" value="5" id="passion-stat">
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <label><strong>ğŸ’¡ ê°€ì¥ ì—…ê·¸ë ˆì´ë“œí•˜ê³  ì‹¶ì€ ìŠ¤íƒ¯:</strong></label>
                        <input type="text" class="input-field" id="upgrade-want" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                </div>
            </div>
        </div>

        <div class="section-divider"></div>

        <!-- íŒ¨ì¹˜ 1: ì˜ˆë°°í•˜ê¸° -->
        <div class="section">
            <div class="patch-card">
                <h3 class="patch-title">ğŸ›ï¸ íŒ¨ì¹˜ 1: ì˜ˆë°°í•˜ê¸°</h3>
                <p>"í•˜ë‚˜ë‹˜ì„ ë§Œë‚˜ëŠ” ê³µì‹ ì±„ë„"</p>
                
                <div class="verse-box">
                    <strong>ğŸ“– ë§ˆíƒœë³µìŒ 1:22-23</strong><br><br>
                    "ì´ ëª¨ë“  ì¼ì´ ì¼ì–´ë‚œ ê²ƒì€... ê·¸ì˜ ì´ë¦„ì„ 
                    <input type="text" class="inline-input" id="verse4" placeholder="ì„ë§ˆëˆ„ì—˜"> 
                    ì´ë¼ê³  í•  ê²ƒì´ë‹¤<br>
                    (ì„ë§ˆëˆ„ì—˜ì€ '<input type="text" class="inline-input" id="verse5" placeholder="í•˜ë‚˜ë‹˜ì´ ìš°ë¦¬ì™€ í•¨ê»˜ ê³„ì‹œë‹¤" style="width: 200px;>'ëŠ” ëœ»)"
                </div>
                
                <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 8px; margin: 10px 0;">
                    <strong>ğŸ”¥ ì˜ˆìˆ˜ë‹˜ì˜ ëª©ì </strong><br>
                    1. ìš°ë¦¬ê°€ <input type="text" class="inline-input" id="purpose1" placeholder="ìƒëª…">ì„ ì–»ê²Œ í•˜ë ¤ê³ <br>
                    2. "<input type="text" class="inline-input" id="purpose2" placeholder="ë” ë„˜ì¹˜ê²Œ">" ëˆ„ë¦¬ë©° ì‚´ê²Œ í•˜ë ¤ê³ 
                </div>
                
                <div class="armor-grid">
                    <div class="armor-piece">
                        <div style="font-size: 2em;">ğŸ”¥</div>
                        <strong>ìš© í—¬ë©§</strong><br>
                        "ë‹¹ì‹ ì€ <input type="text" class="inline-input" id="armor1" placeholder="ìš©ë‚©">ë˜ì—ˆìŠµë‹ˆë‹¤"
                    </div>
                    <div class="armor-piece">
                        <div style="font-size: 2em;">â­</div>
                        <strong>íŠ¹ ê°‘ì˜·</strong><br>
                        "ë‹¹ì‹ ì€ <input type="text" class="inline-input" id="armor2" placeholder="íŠ¹ë³„í•œ">ì¡´ì¬ì…ë‹ˆë‹¤"
                    </div>
                    <div class="armor-piece">
                        <div style="font-size: 2em;">ğŸ¤</div>
                        <strong>ìƒˆ ë°©íŒ¨</strong><br>
                        "ë‹¹ì‹ ì€ <input type="text" class="inline-input" id="armor3" placeholder="ìƒˆë¡œìš´ ê³µë™ì²´">ì— ì†í–ˆìŠµë‹ˆë‹¤"
                    </div>
                </div>
            </div>
        </div>

        <!-- íŒ¨ì¹˜ 2: ì„±ê²½ì½ê¸° -->
        <div class="section">
            <div class="patch-card patch-2">
                <h3 class="patch-title">ğŸ“š íŒ¨ì¹˜ 2: ì„±ê²½ì½ê¸°</h3>
                <p>"í‘¸ë¥¸ë°”ëŒì˜ ëƒ‰ì¥ê³ "</p>
                
                <div class="verse-box">
                    <strong>ğŸ¯ ìš”í•œë³µìŒ 15ì¥ ì•”í˜¸ í•´ë…:</strong><br><br>
                    ë†ë¶€ = <input type="text" class="inline-input" id="farmer" placeholder="í•˜ë‚˜ë‹˜"><br>
                    ë‚˜ë¬´ = <input type="text" class="inline-input" id="tree" placeholder="ì˜ˆìˆ˜ë‹˜"><br>
                    ê°€ì§€ = <input type="text" class="inline-input" id="branch" placeholder="ìš°ë¦¬"><br><br>
                    ğŸ¯ ë¯¸ì…˜: ë‚˜ë¬´ì— <input type="text" class="inline-input" id="mission1" placeholder="ë¨¸ë¬¼ëŸ¬"> ìˆê¸°
                </div>
                
                <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 8px; margin: 10px 0;">
                    <strong>Q: ì„±ê²½ì½ê¸°ëŠ” ì˜ë¬´? íŠ¹ê¶Œ?</strong><br><br>
                    A: <input type="text" class="inline-input" id="duty1" placeholder="ì˜ë¬´">ì´ì 
                    <input type="text" class="inline-input" id="privilege1" placeholder="íŠ¹ê¶Œ">, 
                    ê²°êµ­ì€ <input type="text" class="inline-input" id="finally1" placeholder="íŠ¹ê¶Œ">!
                </div>
                
                <div style="margin: 15px 0;">
                    <strong>ğŸ“ ë‚´ê°€ ì§€ê¸ˆ í•„ìš”í•œ ì„±ê²½ ì•„ì´í…œ:</strong>
                    <input type="text" class="input-field" id="needed-item" placeholder="ì˜ˆ: ì‹œí¸ (ë¶„ë…¸í•  ë•Œ), ì ì–¸ (ì§€í˜œê°€ í•„ìš”í•  ë•Œ)">
                </div>
            </div>
        </div>

        <!-- íŒ¨ì¹˜ 3: ê¸°ë„í•˜ê¸° -->
        <div class="section">
            <div class="patch-card patch-3">
                <h3 class="patch-title">ğŸ™ íŒ¨ì¹˜ 3: ê¸°ë„í•˜ê¸°</h3>
                <p>"ì‹ ì—ê²Œ ë¹¨ëŒ€ ê½‚ê¸°"</p>
                
                <div class="verse-box">
                    <strong>ğŸŒ± ë†ë¶€-ë‚˜ë¬´-ê°€ì§€ ì‹œìŠ¤í…œ:</strong><br><br>
                    ğŸ‘¨â€ğŸŒ¾ ë†ë¶€ = <input type="text" class="inline-input" id="farmer2" placeholder="í•˜ë‚˜ë‹˜"><br>
                    ğŸŒ³ ë‚˜ë¬´ = <input type="text" class="inline-input" id="tree2" placeholder="ì˜ˆìˆ˜ë‹˜"><br>
                    ğŸŒ¿ ê°€ì§€ = <input type="text" class="inline-input" id="branch2" placeholder="ìš°ë¦¬"><br><br>
                    ğŸ¥¤ ë¹¨ëŒ€ = <input type="text" class="inline-input" id="straw" placeholder="ê¸°ë„">
                </div>
                
                <div class="time-system">
                    <h4>â° 10-10-10 ì‹œê°„ ê´€ë¦¬</h4>
                    <div class="time-slot">
                        <h4>ğŸŒ… ëª¨ë‹ íŒ¨ì¹˜ (10ë¶„)</h4>
                        <ul class="checklist">
                            <li><input type="checkbox" class="checkbox" id="morning1"> í•˜ë‚˜ë‹˜ê»˜ ì¸ì‚¬í•˜ê¸°</li>
                            <li><input type="checkbox" class="checkbox" id="morning2"> "ì˜¤ëŠ˜ë„ ë§ì”€í•´ì£¼ì„¸ìš”" ê¸°ë„</li>
                            <li><input type="checkbox" class="checkbox" id="morning3"> ì„±ê²½ ì½ê¸°</li>
                            <li><input type="checkbox" class="checkbox" id="morning4"> ê¸°íƒ€: <input type="text" class="input-field" id="morning-extra" placeholder="ì¶”ê°€ ê³„íš" style="margin-top: 5px;"></li>
                        </ul>
                    </div>
                    
                    <div class="time-slot">
                        <h4>ğŸŒ ì ì‹¬ íŒ¨ì¹˜ (10ë¶„)</h4>
                        <ul class="checklist">
                            <li><input type="checkbox" class="checkbox" id="lunch1"> ê·¸ë¶„ ëª©ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ê¸°</li>
                            <li><input type="checkbox" class="checkbox" id="lunch2"> "í•˜ë‚˜ë‹˜, ë„ì™€ì£¼ì„¸ìš”" ê¸°ë„</li>
                            <li><input type="checkbox" class="checkbox" id="lunch3"> ìì—°ê³¼ í•¨ê»˜ ëŒ€í™”í•˜ê¸°</li>
                            <li><input type="checkbox" class="checkbox" id="lunch4"> ê¸°íƒ€: <input type="text" class="input-field" id="lunch-extra" placeholder="ì¶”ê°€ ê³„íš" style="margin-top: 5px;"></li>
                        </ul>
                    </div>
                    
                    <div class="time-slot">
                        <h4>ğŸŒ™ ì´ë¸Œë‹ íŒ¨ì¹˜ (10ë¶„)</h4>
                        <ul class="checklist">
                            <li><input type="checkbox" class="checkbox" id="evening1"> í•˜ë£¨ ê°ì‚¬ ê¸°ë„</li>
                            <li><input type="checkbox" class="checkbox" id="evening2"> ê¸°ë„ ì¼ê¸° ì“°ê¸°</li>
                            <li><input type="checkbox" class="checkbox" id="evening3"> ë§ì”€ ë¬µìƒ</li>
                            <li><input type="checkbox" class="checkbox" id="evening4"> ê¸°íƒ€: <input type="text" class="input-field" id="evening-extra" placeholder="ì¶”ê°€ ê³„íš" style="margin-top: 5px;"></li>
                        </ul>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 8px; margin: 10px 0;">
                    <strong>ğŸ§© ìˆ˜ê³  ìˆœì„œ í¼ì¦</strong><br>
                    ì—´ë§¤ë¥¼ ë§ºê¸° ìœ„í•´ ê°€ì¥ ìˆ˜ê³ í•˜ëŠ” ìˆœì„œëŠ”?<br><br>
                    ğŸ¥‡ 1ë“±: <input type="text" class="inline-input" id="work1" placeholder="ë†ë¶€"><br>
                    ğŸ¥ˆ 2ë“±: <input type="text" class="inline-input" id="work2" placeholder="ë‚˜ë¬´"><br>
                    ğŸ¥‰ 3ë“±: <input type="text" class="inline-input" id="work3" placeholder="ê°€ì§€">
                </div>
            </div>
        </div>

        <div class="section-divider"></div>

        <!-- ê°œì¸ ë§ì¶¤ ì„¤ì • -->
        <div class="section">
            <h3 class="section-title">ğŸ› ï¸ ë‚˜ë§Œì˜ íŒ¨ì¹˜ ì„¤ì •</h3>
            
            <div class="mini-game">
                <h4>ğŸ¯ ì˜ˆë°° íŒ¨ì¹˜ ì„¤ì •</h4>
                <div class="info-item">
                    <label>ëª©í‘œ:</label>
                    <input type="text" class="input-field" id="worship-goal" placeholder="ì˜ˆ: ì ê·¹ì ìœ¼ë¡œ ì˜ˆë°° ì°¸ì—¬í•˜ê¸°">
                </div>
                <div class="info-item">
                    <label>ë°©ë²•:</label>
                    <input type="text" class="input-field" id="worship-method" placeholder="ì˜ˆ: ë©”ëª¨í•˜ë©° ë“£ê¸°">
                </div>
                <div class="info-item">
                    <label>ì‹œê°„:</label>
                    <input type="text" class="input-field" id="worship-time" placeholder="ì˜ˆ: ì£¼ì¼ ì˜¤ì „ 11ì‹œ">
                </div>
            </div>

            <div class="mini-game">
                <h4>ğŸ“– ì„±ê²½ íŒ¨ì¹˜ ì„¤ì •</h4>
                <div class="info-item">
                    <label>ëª©í‘œ:</label>
                    <input type="text" class="input-field" id="bible-goal" placeholder="ì˜ˆ: ë§¤ì¼ ì„±ê²½ 1ì¥ ì½ê¸°">
                </div>
                <div class="info-item">
                    <label>ë°©ë²•:</label>
                    <input type="text" class="input-field" id="bible-method" placeholder="ì˜ˆ: ìš”í•œë³µìŒë¶€í„° ì‹œì‘">
                </div>
                <div class="info-item">
                    <label>ì‹œê°„:</label>
                    <input type="text" class="input-field" id="bible-time" placeholder="ì˜ˆ: ì•„ì¹¨ 7ì‹œ">
                </div>
            </div>

            <div class="mini-game">
                <h4>ğŸ™ ê¸°ë„ íŒ¨ì¹˜ ì„¤ì •</h4>
                <div class="info-item">
                    <label>ì‹œê°„ ì„ íƒ:</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="prayer_time" id="prayer-10" value="10-10-10">
                            <label for="prayer-10">10-10-10</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="prayer_time" id="prayer-5" value="5-5-5">
                            <label for="prayer-5">5-5-5</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="prayer_time" id="prayer-1" value="1-1-1">
                            <label for="prayer-1">1-1-1</label>
                        </div>
                    </div>
                </div>
                <div class="info-item">
                    <label>ì•Œë¦¼ ì‹œê°„:</label>
                    <input type="text" class="input-field" id="alarm-time" placeholder="ì˜ˆ: 7ì‹œ, 12ì‹œ, 10ì‹œ">
                </div>
                <div class="info-item">
                    <label>ì¥ì†Œ:</label>
                    <input type="text" class="input-field" id="prayer-place" placeholder="ì˜ˆ: ë°©, í•™êµ, ì¹¨ëŒ€">
                </div>
            </div>
        </div>

        <!-- ë³´ìŠ¤ ëŒ€ê²° -->
        <div class="section">
            <div class="boss-battle">
                <h3>ğŸ‘¹ ìµœì¢… ë³´ìŠ¤ ëŒ€ê²°</h3>
                <div style="font-size: 1.1em; margin-bottom: 15px;">
                    <strong>ë³´ìŠ¤:</strong> "í¬ê¸°í•˜ê³  ì‹¶ì€ ë§ˆìŒ"
                </div>
                
                <div>
                    <strong>HP:</strong>
                    <div class="boss-hp">
                        <div class="boss-hp-fill"></div>
                    </div>
                    <small>íŠ¹ìˆ˜ ê³µê²©: í•‘ê³„ ë§Œë“¤ê¸°, ë¯¸ë£¨ê¸°, ê¹Œë¨¹ê¸°</small>
                </div>
                
                <div style="margin: 15px 0;">
                    <strong>ğŸ—¡ï¸ ë‚´ ë¬´ê¸° ì„ íƒ:</strong>
                    <div class="weapon-grid">
                        <div class="weapon touch-feedback">
                            <div style="font-size: 1.5em;">âš”ï¸</div>
                            <strong>ì˜ˆë°° íŒ¨ì¹˜ ê²€</strong>
                            <input type="checkbox" class="checkbox" id="weapon1">
                        </div>
                        <div class="weapon touch-feedback">
                            <div style="font-size: 1.5em;">ğŸ›¡ï¸</div>
                            <strong>ì„±ê²½ íŒ¨ì¹˜ ë°©íŒ¨</strong>
                            <input type="checkbox" class="checkbox" id="weapon2">
                        </div>
                        <div class="weapon touch-feedback">
                            <div style="font-size: 1.5em;">ğŸ”®</div>
                            <strong>ê¸°ë„ íŒ¨ì¹˜ ë§ˆë²•</strong>
                            <input type="checkbox" class="checkbox" id="weapon3">
                        </div>
                        <div class="weapon touch-feedback">
                            <div style="font-size: 1.5em;">ğŸ’¥</div>
                            <strong>ì˜¬ì¸ì› ì½¤ë³´</strong>
                            <input type="checkbox" class="checkbox" id="weapon4">
                        </div>
                    </div>
                </div>
                
                <div style="margin: 15px 0;">
                    <strong>ğŸ’ª ìŠ¹ë¦¬ ì „ëµ:</strong>
                    <div style="margin-top: 10px;">
                        <input type="text" class="input-field" id="strategy1" placeholder="1. ì „ëµì„ ì…ë ¥í•˜ì„¸ìš”" style="margin-bottom: 8px;">
                        <input type="text" class="input-field" id="strategy2" placeholder="2. ì „ëµì„ ì…ë ¥í•˜ì„¸ìš”" style="margin-bottom: 8px;">
                        <input type="text" class="input-field" id="strategy3" placeholder="3. ì „ëµì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                </div>
            </div>
        </div>

        <!-- 7ì¼ ë„ì „ -->
        <div class="section">
            <div class="challenge-section">
                <h3 class="section-title">ğŸ—“ï¸ 7ì¼ ì—°ì† í€˜ìŠ¤íŠ¸</h3>
                
                <div class="challenge-day">
                    <input type="checkbox" class="checkbox" id="day1">
                    <div>
                        <strong>DAY 1:</strong> íŒ¨ì¹˜ í™œì„±í™” - ë‚´ê°€ ì„ íƒí•œ ì‹œê°„ì— ê¸°ë„í•´ë³´ê¸°
                        <div style="color: #667eea; font-size: 0.9em;">XP +10</div>
                    </div>
                </div>
                
                <div class="challenge-day">
                    <input type="checkbox" class="checkbox" id="day2">
                    <div>
                        <strong>DAY 2:</strong> ì²« ë²ˆì§¸ ì„±ê²½ ì½ê¸° - ì„±ê²½ í•œ ì¥ ì½ê³  í•œ ì¤„ ë©”ëª¨í•˜ê¸°
                        <div style="color: #667eea; font-size: 0.9em;">XP +15</div>
                    </div>
                </div>
                
                <div class="challenge-day">
                    <input type="checkbox" class="checkbox" id="day3">
                    <div>
                        <strong>DAY 3:</strong> ì˜ˆë°° ì—…ê·¸ë ˆì´ë“œ - ì˜ˆë°° ì‹œê°„ì— ì ê·¹ ì°¸ì—¬í•˜ê¸°
                        <div style="color: #667eea; font-size: 0.9em;">XP +20</div>
                    </div>
                </div>
                
                <div class="challenge-day">
                    <input type="checkbox" class="checkbox" id="day4">
                    <div>
                        <strong>DAY 4:</strong> ìì—°ê³¼ í•¨ê»˜ - ìì—°ì„ ë³´ë©° í•˜ë‚˜ë‹˜ê»˜ ë§ì”€ë“œë¦¬ê¸°
                        <div style="color: #667eea; font-size: 0.9em;">XP +10</div>
                    </div>
                </div>
                
                <div class="challenge-day">
                    <input type="checkbox" class="checkbox" id="day5">
                    <div>
                        <strong>DAY 5:</strong> ì‹œê°„ ê´€ë¦¬ ë„ì „ - 10-10-10 ì¤‘ í•˜ë‚˜ ì™„ì£¼í•˜ê¸°
                        <div style="color: #667eea; font-size: 0.9em;">XP +25</div>
                    </div>
                </div>
                
                <div class="challenge-day">
                    <input type="checkbox" class="checkbox" id="day6">
                    <div>
                        <strong>DAY 6:</strong> ê¸¸ë“œ í™œë™ - ì¹œêµ¬ì™€ ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© ë‚˜ëˆ„ê¸°
                        <div style="color: #667eea; font-size: 0.9em;">XP +15</div>
                    </div>
                </div>
                
                <div class="challenge-day">
                    <input type="checkbox" class="checkbox" id="day7">
                    <div>
                        <strong>DAY 7:</strong> í›„ê¸° ì‘ì„± - ì¼ì£¼ì¼ ê²½í—˜ ì •ë¦¬í•˜ê¸°
                        <div style="color: #667eea; font-size: 0.9em;">XP +30</div>
                    </div>
                </div>
                
                <div class="xp-counter">
                    ğŸ¯ ì´ XP: <span id="total-xp">0</span>/125
                </div>
            </div>
        </div>

        <!-- ê°œì¸ ì†Œê° -->
        <div class="section">
            <div class="reflection-section">
                <h3 class="section-title">ğŸ“ ê°œì¸ ì†Œê°</h3>
                
                <div class="reflection-item">
                    <label class="reflection-label">ğŸŒŸ ì˜¤ëŠ˜ì˜ MVP (ê°€ì¥ ì¸ìƒ ê¹Šì—ˆë˜ ìˆœê°„):</label>
                    <textarea class="textarea-field" id="mvp-moment" placeholder="ìì„¸íˆ ì¨ë³´ì„¸ìš”..."></textarea>
                </div>
                
                <div class="reflection-item">
                    <label class="reflection-label">ğŸ¯ ë‚´ê°€ ê¼­ ê¸°ì–µí•˜ê³  ì‹¶ì€ í•œ ë¬¸ì¥:</label>
                    <input type="text" class="input-field" id="remember-sentence" placeholder="ê°€ì¥ ë§ˆìŒì— ì™€ë‹¿ì€ ë§ì”€ì´ë‚˜ ë¬¸ì¥ì„ ì¨ë³´ì„¸ìš”">
                </div>
                
                <div class="reflection-item">
                    <label class="reflection-label">ğŸ”¥ ë‹¤ìŒ ì£¼ê¹Œì§€ ê¼­ ì‹¤ì²œí•  ê²ƒ:</label>
                    <input type="text" class="input-field" id="action1" placeholder="1. êµ¬ì²´ì ì¸ ì‹¤ì²œ ê³„íš" style="margin-bottom: 8px;">
                    <input type="text" class="input-field" id="action2" placeholder="2. êµ¬ì²´ì ì¸ ì‹¤ì²œ ê³„íš" style="margin-bottom: 8px;">
                    <input type="text" class="input-field" id="action3" placeholder="3. êµ¬ì²´ì ì¸ ì‹¤ì²œ ê³„íš">
                </div>
                
                <div class="reflection-item">
                    <label class="reflection-label">ğŸ’Œ ë¯¸ë˜ì˜ ë‚˜ì—ê²Œ í•˜ê³  ì‹¶ì€ ë§:</label>
                    <textarea class="textarea-field" id="future-message" placeholder="í•œ ë‹¬ í›„, ì¼ ë…„ í›„ì˜ ë‚˜ì—ê²Œ í•˜ê³  ì‹¶ì€ ë§ì„ ì¨ë³´ì„¸ìš”..."></textarea>
                </div>
            </div>
        </div>

        <!-- ìµœì¢… ë©”ì‹œì§€ -->
        <div class="section">
            <div class="final-message">
                <h2>ğŸ® QUEST 1 ì™„ë£Œ! ğŸ®</h2>
                <p>âœ¨ ì¶•í•˜í•©ë‹ˆë‹¤! ì²« ë²ˆì§¸ í€˜ìŠ¤íŠ¸ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! âœ¨</p>
                
                <div style="margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                    <h3>ğŸ¯ "ì´ íŒ¨ì¹˜ë“¤ì€ íŠ¹ê¶Œì…ë‹ˆë‹¤!"</h3>
                    <p>ğŸ’ í‘¸ë¥¸ë°”ëŒì˜ ë‚˜ë¼ ì‚¬ëŒë“¤ì—ê²Œ ì£¼ì–´ì§„<br>
                    ê±°ë¶€í•  ìˆ˜ ì—†ëŠ” íŠ¹ê¶Œì„ ëˆ„ë¦¬ë©°<br>
                    ì˜ˆìˆ˜ë‹˜ê³¼ í•¨ê»˜ ê±¸ì–´ê°€ì„¸ìš”!</p>
                </div>
                
                <p style="font-style: italic; margin-top: 20px;">
                    "ë‹¹ì‹ ì„ ìœ„í•´ ì´ë¯¸ ëª©ìˆ¨ì„ ë‚´ë†“ìœ¼ì‹  í•˜ë‚˜ë‹˜ì´<br>
                    ì—¬ëŸ¬ë¶„ê³¼ í•¨ê»˜ í•˜ì‹­ë‹ˆë‹¤."
                </p>
                
                <button class="btn touch-feedback">ğŸš€ ë‹¤ìŒ í€˜ìŠ¤íŠ¸ë¡œ!</button>
            </div>
        </div>

        <!-- í‘¸í„° -->
        <div style="background: #2d3436; color: white; padding: 20px; text-align: center; margin-top: 0;">
            <p style="font-size: 0.9em;"><strong>ğŸ“š ì°¸ê³ :</strong> ã€Ší‘¸ë¥¸ë°”ëŒì´ ë„ˆì™€ í•¨ê»˜í•´ã€‹(ì„œì§€ì„± ì €)</p>
            <p style="font-size: 0.8em; margin-top: 8px;">ğŸ® v2.0 Mobile | 2024</p>
        </div>
    </div>

    <!-- ì§„í–‰ë„ í‘œì‹œ -->
    <div class="progress-indicator" id="progressIndicator">0%</div>

    <!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
    <div class="toast" id="toast"></div>

    <!-- ë¡œë”© -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>ë™ê¸°í™” ì¤‘...</p>
    </div>

    <script>
        // ê³µìœ  ì‹œìŠ¤í…œ ë³€ìˆ˜
        let currentRoom = null;
        let isHost = false;
        let syncInterval = null;

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤
        const STORAGE_KEY = 'bluewind_mobile_quest1';

        // ëª¨ë“  ì…ë ¥ í•„ë“œ ID ë¦¬ìŠ¤íŠ¸
        const inputFields = [
            'playerName', 'guildName', 'startDate', 'matchA', 'matchB', 'matchC', 'matchD',
            'upgrade-want', 'verse4', 'verse5', 'purpose1', 'purpose2', 'armor1', 'armor2', 'armor3',
            'farmer', 'tree', 'branch', 'mission1', 'duty1', 'privilege1', 'finally1',
            'needed-item', 'farmer2', 'tree2', 'branch2', 'straw', 'morning-extra', 'lunch-extra',
            'evening-extra', 'work1', 'work2', 'work3', 'worship-goal', 'worship-method',
            'worship-time', 'bible-goal', 'bible-method', 'bible-time', 'alarm-time', 'prayer-place',
            'strategy1', 'strategy2', 'strategy3', 'mvp-moment', 'remember-sentence',
            'action1', 'action2', 'action3', 'future-message'
        ];

        // ì²´í¬ë°•ìŠ¤ í•„ë“œ ID ë¦¬ìŠ¤íŠ¸
        const checkboxFields = [
            'morning1', 'morning2', 'morning3', 'morning4', 'lunch1', 'lunch2', 'lunch3', 'lunch4',
            'evening1', 'evening2', 'evening3', 'evening4', 'weapon1', 'weapon2', 'weapon3', 'weapon4',
            'day1', 'day2', 'day3', 'day4', 'day5', 'day6', 'day7'
        ];

        // ë¼ë””ì˜¤ ë²„íŠ¼ í•„ë“œ
        const radioFields = ['prayer_time'];

        // ìŠ¬ë¼ì´ë” í•„ë“œ
        const sliderFields = ['worship-stat', 'bible-stat', 'prayer-stat', 'passion-stat'];

        // í† ìŠ¤íŠ¸ ì•Œë¦¼ í‘œì‹œ
        function showToast(message, duration = 3000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // ë°© ë§Œë“¤ê¸°
        function createRoom() {
            const roomCode = Math.random().toString(36).substr(2, 6).toUpperCase();
            currentRoom = roomCode;
            isHost = true;
            
            document.getElementById('roomDisplay').textContent = `ë°©: ${roomCode}`;
            enableSharing();
            showToast(`ë°©ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ì½”ë“œ: ${roomCode}`);
            
            // ì •ê¸°ì ìœ¼ë¡œ ë°ì´í„° ì €ì¥
            syncInterval = setInterval(syncData, 1000);
        }

        // ë°© ì°¸ì—¬í•˜ê¸°
        function joinRoom() {
            const roomCode = prompt('ë°© ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”:');
            if (roomCode) {
                currentRoom = roomCode.toUpperCase();
                isHost = false;
                
                document.getElementById('roomDisplay').textContent = `ë°©: ${currentRoom}`;
                enableSharing();
                showToast(`ë°©ì— ì°¸ì—¬í–ˆìŠµë‹ˆë‹¤! ì½”ë“œ: ${currentRoom}`);
                
                // ì •ê¸°ì ìœ¼ë¡œ ë°ì´í„° ë¡œë“œ
                syncInterval = setInterval(loadSharedData, 1000);
            }
        }

        // ê³µìœ  ëª¨ë“œ í™œì„±í™”
        function enableSharing() {
            // ëª¨ë“  ì…ë ¥ í•„ë“œì— ê³µìœ  ìŠ¤íƒ€ì¼ ì ìš©
            [...inputFields, ...checkboxFields, ...sliderFields].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.add('shared-input');
                    element.addEventListener('input', syncData);
                    element.addEventListener('change', syncData);
                }
            });

            // ë¼ë””ì˜¤ ë²„íŠ¼
            radioFields.forEach(name => {
                const elements = document.querySelectorAll(`input[name="${name}"]`);
                elements.forEach(element => {
                    element.addEventListener('change', syncData);
                });
            });
        }

        // ë°ì´í„° ë™ê¸°í™”
        function syncData() {
            if (!currentRoom) return;

            const data = gatherAllData();
            localStorage.setItem(`${STORAGE_KEY}_${currentRoom}`, JSON.stringify(data));
        }

        // ëª¨ë“  ë°ì´í„° ìˆ˜ì§‘
        function gatherAllData() {
            const data = {};
            
            // í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œ
            inputFields.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    data[id] = element.value;
                }
            });

            // ì²´í¬ë°•ìŠ¤ í•„ë“œ
            checkboxFields.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    data[id] = element.checked;
                }
            });

            // ë¼ë””ì˜¤ ë²„íŠ¼
            radioFields.forEach(name => {
                const checked = document.querySelector(`input[name="${name}"]:checked`);
                if (checked) {
                    data[name] = checked.value;
                }
            });

            // ìŠ¬ë¼ì´ë”
            sliderFields.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    data[id] = element.value;
                }
            });

            return data;
        }

        // ë°ì´í„° ë¡œë“œ
        function loadSharedData() {
            if (!currentRoom) return;

            const savedData = localStorage.getItem(`${STORAGE_KEY}_${currentRoom}`);
            if (savedData) {
                const data = JSON.parse(savedData);
                
                // í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œ ë³µì›
                inputFields.forEach(id => {
                    const element = document.getElementById(id);
                    if (element && data[id] !== undefined) {
                        element.value = data[id];
                    }
                });

                // ì²´í¬ë°•ìŠ¤ í•„ë“œ ë³µì›
                checkboxFields.forEach(id => {
                    const element = document.getElementById(id);
                    if (element && data[id] !== undefined) {
                        element.checked = data[id];
                        updateCheckboxStyle(element);
                    }
                });

                // ë¼ë””ì˜¤ ë²„íŠ¼ ë³µì›
                radioFields.forEach(name => {
                    if (data[name]) {
                        const element = document.querySelector(`input[name="${name}"][value="${data[name]}"]`);
                        if (element) {
                            element.checked = true;
                        }
                    }
                });

                // ìŠ¬ë¼ì´ë” ë³µì›
                sliderFields.forEach(id => {
                    const element = document.getElementById(id);
                    if (element && data[id] !== undefined) {
                        element.value = data[id];
                        updateStatBar(id, data[id]);
                    }
                });

                // XP ì—…ë°ì´íŠ¸
                updateTotalXP();
            }
        }

        // ìŠ¤íƒ¯ ë°” ì—…ë°ì´íŠ¸
        function updateStatBar(statId, value) {
            const fillId = statId.replace('-stat', '-fill');
            const fillBar = document.getElementById(fillId);
            if (fillBar) {
                fillBar.style.width = (value * 10) + '%';
            }
        }

        // ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
        function updateCheckboxStyle(checkbox) {
            const li = checkbox.closest('li') || checkbox.closest('.challenge-day');
            if (li) {
                if (checkbox.checked) {
                    li.style.background = 'rgba(76, 175, 80, 0.3)';
                } else {
                    li.style.background = '';
                }
            }
        }

        // ì´ XP ì—…ë°ì´íŠ¸
        function updateTotalXP() {
            const xpValues = [10, 15, 20, 10, 25, 15, 30];
            let totalXP = 0;
            
            for (let i = 1; i <= 7; i++) {
                const checkbox = document.getElementById(`day${i}`);
                if (checkbox && checkbox.checked) {
                    totalXP += xpValues[i - 1];
                }
            }
            
            document.getElementById('total-xp').textContent = totalXP;
            updateProgressIndicator();
        }

        // ì§„í–‰ë„ ì—…ë°ì´íŠ¸
        function updateProgressIndicator() {
            const totalFields = inputFields.length + checkboxFields.length;
            let filledFields = 0;
            
            inputFields.forEach(id => {
                const element = document.getElementById(id);
                if (element && element.value.trim() !== '') {
                    filledFields++;
                }
            });
            
            checkboxFields.forEach(id => {
                const element = document.getElementById(id);
                if (element && element.checked) {
                    filledFields++;
                }
            });
            
            const progress = Math.round((filledFields / totalFields) * 100);
            document.getElementById('progressIndicator').textContent = progress + '%';
        }

        // ì´ˆê¸°í™”
        function initialize() {
            // ì˜¤ëŠ˜ ë‚ ì§œ ìë™ ì„¤ì •
            const today = new Date().toISOString().split('T')[0];
            const startDateInput = document.getElementById('startDate');
            if (startDateInput) {
                startDateInput.value = today;
            }
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            
            // ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
            sliderFields.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', function() {
                        updateStatBar(id, this.value);
                        updateProgressIndicator();
                    });
                }
            });

            // ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸
            checkboxFields.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', function() {
                        updateCheckboxStyle(this);
                        if (id.startsWith('day')) {
                            updateTotalXP();
                        }
                        updateProgressIndicator();
                    });
                }
            });

            // ì…ë ¥ í•„ë“œ ì´ë²¤íŠ¸
            inputFields.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', updateProgressIndicator);
                }
            });

            // ë¯¸ì…˜ ëª©í‘œ í´ë¦­ ì´ë²¤íŠ¸
            document.querySelectorAll('.objectives li').forEach(item => {
                item.addEventListener('click', function() {
                    const checkbox = this.querySelector('input[type="checkbox"]') || 
                                    document.createElement('input');
                    if (!this.querySelector('input[type="checkbox"]')) {
                        checkbox.type = 'checkbox';
                        checkbox.className = 'checkbox';
                        this.insertBefore(checkbox, this.firstChild);
                    }
                    checkbox.checked = !checkbox.checked;
                    updateCheckboxStyle(checkbox);
                    updateProgressIndicator();
                });
            });

            // ì´ˆê¸° ìƒíƒœ ì—…ë°ì´íŠ¸
            updateTotalXP();
            updateProgressIndicator();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', initialize);

        // í˜ì´ì§€ ë²—ì–´ë‚˜ê¸° ì „ ë°ì´í„° ì €ì¥
        window.addEventListener('beforeunload', function() {
            if (currentRoom) {
                syncData();
            }
            if (syncInterval) {
                clearInterval(syncInterval);
            }
        });

        // í„°ì¹˜ í”¼ë“œë°± ê°œì„ 
        document.addEventListener('touchstart', function(e) {
            if (e.target.classList.contains('touch-feedback')) {
                e.target.style.transform = 'scale(0.95)';
            }
        });

        document.addEventListener('touchend', function(e) {
            if (e.target.classList.contains('touch-feedback')) {
                setTimeout(() => {
                    e.target.style.transform = '';
                }, 150);
            }
        });

        // ìŠ¤í¬ë¡¤ ì‹œ í—¤ë” ìˆ¨ê¸°ê¸°/ë³´ì´ê¸°
        let lastScrollTop = 0;
        window.addEventListener('scroll', function() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const header = document.querySelector('.mobile-header');
            
            if (scrollTop > lastScrollTop && scrollTop > 100) {
                header.style.transform = 'translateY(-100%)';
            } else {
                header.style.transform = 'translateY(0)';
            }
            lastScrollTop = scrollTop;
        });

        // ì¸í’‹ í¬ì»¤ìŠ¤ ì‹œ í‚¤ë³´ë“œ ëŒ€ì‘
        document.addEventListener('focusin', function(e) {
            if (e.target.matches('.input-field, .textarea-field')) {
                setTimeout(() => {
                    e.target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 300);
            }
        });

        // ì„œë¹„ìŠ¤ì›Œì»¤ ë“±ë¡ (PWA ì§€ì›)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(console.error);
        }
    </script>
</body>
</html>
